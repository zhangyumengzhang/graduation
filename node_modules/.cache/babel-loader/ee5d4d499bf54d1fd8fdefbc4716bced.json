{"remainingRequest":"D:\\2021graduate\\graduation\\node_modules\\babel-loader\\lib\\index.js!D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2021graduate\\graduation\\node_modules\\vue-aplayer\\src\\components\\aplayer-lrc.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2021graduate\\graduation\\node_modules\\vue-aplayer\\src\\components\\aplayer-lrc.vue","mtime":1612070388741},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\babel-loader\\lib\\index.js","mtime":1594033213222},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js","mtime":1594033220124}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7Ci8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCi8vCmltcG9ydCB7IHBhcnNlTHJjIH0gZnJvbSAnLi4vdXRpbHMnOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IHsKICAgIGN1cnJlbnRNdXNpYzogewogICAgICB0eXBlOiBPYmplY3QsCiAgICAgIHJlcXVpcmVkOiB0cnVlCiAgICB9LAogICAgcGxheVN0YXQ6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfQogIH0sCiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGRpc3BsYXlMcmM6ICcnLAogICAgICBjdXJyZW50TGluZUluZGV4OiAwCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGxyY0xpbmVzOiBmdW5jdGlvbiBscmNMaW5lcygpIHsKICAgICAgcmV0dXJuIHBhcnNlTHJjKHRoaXMuZGlzcGxheUxyYyk7CiAgICB9LAogICAgY3VycmVudExpbmU6IGZ1bmN0aW9uIGN1cnJlbnRMaW5lKCkgewogICAgICBpZiAodGhpcy5jdXJyZW50TGluZUluZGV4ID4gdGhpcy5scmNMaW5lcy5sZW5ndGggLSAxKSB7CiAgICAgICAgcmV0dXJuIG51bGw7CiAgICAgIH0KCiAgICAgIHJldHVybiB0aGlzLmxyY0xpbmVzW3RoaXMuY3VycmVudExpbmVJbmRleF07CiAgICB9LAogICAgdHJhbnNmb3JtU3R5bGU6IGZ1bmN0aW9uIHRyYW5zZm9ybVN0eWxlKCkgewogICAgICAvLyB0cmFuc2Zvcm06IHRyYW5zbGF0ZVkoMCk7IC13ZWJraXQtdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOwogICAgICByZXR1cm4gewogICAgICAgIHRyYW5zZm9ybTogInRyYW5zbGF0ZVkoIi5jb25jYXQoLXRoaXMuY3VycmVudExpbmVJbmRleCAqIDE2LCAicHgpIiksCiAgICAgICAgd2Via2l0VHJhbnNmb3JtOiAidHJhbnNsYXRlWSgiLmNvbmNhdCgtdGhpcy5jdXJyZW50TGluZUluZGV4ICogMTYsICJweCkiKQogICAgICB9OwogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgYXBwbHlMcmM6IGZ1bmN0aW9uIGFwcGx5THJjKGxyYykgewogICAgICBpZiAoL15odHRwcz86XC9cLy8udGVzdChscmMpKSB7CiAgICAgICAgdGhpcy5mZXRjaExyYyhscmMpOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZGlzcGxheUxyYyA9IGxyYzsKICAgICAgfQogICAgfSwKICAgIGZldGNoTHJjOiBmdW5jdGlvbiBmZXRjaExyYyhzcmMpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIGZldGNoKHNyYykudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICByZXR1cm4gcmVzcG9uc2UudGV4dCgpOwogICAgICB9KS50aGVuKGZ1bmN0aW9uIChscmMpIHsKICAgICAgICBfdGhpcy5kaXNwbGF5THJjID0gbHJjOwogICAgICB9KTsKICAgIH0sCiAgICBoaWRlTHJjOiBmdW5jdGlvbiBoaWRlTHJjKCkgewogICAgICB0aGlzLmRpc3BsYXlMcmMgPSAnJzsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBjdXJyZW50TXVzaWM6IHsKICAgICAgaW1tZWRpYXRlOiB0cnVlLAogICAgICBoYW5kbGVyOiBmdW5jdGlvbiBoYW5kbGVyKG11c2ljKSB7CiAgICAgICAgdGhpcy5jdXJyZW50TGluZUluZGV4ID0gMDsKCiAgICAgICAgaWYgKG11c2ljLmxyYykgewogICAgICAgICAgdGhpcy5hcHBseUxyYyhtdXNpYy5scmMpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmhpZGVMcmMoKTsKICAgICAgICB9CiAgICAgIH0KICAgIH0sCiAgICAncGxheVN0YXQucGxheWVkVGltZSc6IGZ1bmN0aW9uIHBsYXlTdGF0UGxheWVkVGltZShwbGF5ZWRUaW1lKSB7CiAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5scmNMaW5lcy5sZW5ndGg7IGkrKykgewogICAgICAgIHZhciBsaW5lID0gdGhpcy5scmNMaW5lc1tpXTsKICAgICAgICB2YXIgbmV4dExpbmUgPSB0aGlzLmxyY0xpbmVzW2kgKyAxXTsKCiAgICAgICAgaWYgKHBsYXllZFRpbWUgPj0gbGluZVswXSAmJiAoIW5leHRMaW5lIHx8IHBsYXllZFRpbWUgPCBuZXh0TGluZVswXSkpIHsKICAgICAgICAgIHRoaXMuY3VycmVudExpbmVJbmRleCA9IGk7CiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["aplayer-lrc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA,SAAA,QAAA,QAAA,UAAA;AAEA,eAAA;AACA,EAAA,KAAA,EAAA;AACA,IAAA,YAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA,KADA;AAKA,IAAA,QAAA,EAAA;AACA,MAAA,IAAA,EAAA,MADA;AAEA,MAAA,QAAA,EAAA;AAFA;AALA,GADA;AAWA,EAAA,IAXA,kBAWA;AACA,WAAA;AACA,MAAA,UAAA,EAAA,EADA;AAEA,MAAA,gBAAA,EAAA;AAFA,KAAA;AAIA,GAhBA;AAiBA,EAAA,QAAA,EAAA;AACA,IAAA,QADA,sBACA;AACA,aAAA,QAAA,CAAA,KAAA,UAAA,CAAA;AACA,KAHA;AAIA,IAAA,WAJA,yBAIA;AACA,UAAA,KAAA,gBAAA,GAAA,KAAA,QAAA,CAAA,MAAA,GAAA,CAAA,EAAA;AACA,eAAA,IAAA;AACA;;AACA,aAAA,KAAA,QAAA,CAAA,KAAA,gBAAA,CAAA;AACA,KATA;AAUA,IAAA,cAVA,4BAUA;AACA;AACA,aAAA;AACA,QAAA,SAAA,uBAAA,CAAA,KAAA,gBAAA,GAAA,EAAA,QADA;AAEA,QAAA,eAAA,uBAAA,CAAA,KAAA,gBAAA,GAAA,EAAA;AAFA,OAAA;AAIA;AAhBA,GAjBA;AAmCA,EAAA,OAAA,EAAA;AACA,IAAA,QADA,oBACA,GADA,EACA;AACA,UAAA,eAAA,IAAA,CAAA,GAAA,CAAA,EAAA;AACA,aAAA,QAAA,CAAA,GAAA;AACA,OAFA,MAEA;AACA,aAAA,UAAA,GAAA,GAAA;AACA;AACA,KAPA;AAQA,IAAA,QARA,oBAQA,GARA,EAQA;AAAA;;AACA,MAAA,KAAA,CAAA,GAAA,CAAA,CACA,IADA,CACA,UAAA,QAAA;AAAA,eAAA,QAAA,CAAA,IAAA,EAAA;AAAA,OADA,EAEA,IAFA,CAEA,UAAA,GAAA,EAAA;AACA,QAAA,KAAA,CAAA,UAAA,GAAA,GAAA;AACA,OAJA;AAKA,KAdA;AAeA,IAAA,OAfA,qBAeA;AACA,WAAA,UAAA,GAAA,EAAA;AACA;AAjBA,GAnCA;AAsDA,EAAA,KAAA,EAAA;AACA,IAAA,YAAA,EAAA;AACA,MAAA,SAAA,EAAA,IADA;AAEA,MAAA,OAFA,mBAEA,KAFA,EAEA;AACA,aAAA,gBAAA,GAAA,CAAA;;AACA,YAAA,KAAA,CAAA,GAAA,EAAA;AACA,eAAA,QAAA,CAAA,KAAA,CAAA,GAAA;AACA,SAFA,MAEA;AACA,eAAA,OAAA;AACA;AACA;AATA,KADA;AAYA,yBAZA,8BAYA,UAZA,EAYA;AACA,WAAA,IAAA,CAAA,GAAA,CAAA,EAAA,CAAA,GAAA,KAAA,QAAA,CAAA,MAAA,EAAA,CAAA,EAAA,EAAA;AACA,YAAA,IAAA,GAAA,KAAA,QAAA,CAAA,CAAA,CAAA;AACA,YAAA,QAAA,GAAA,KAAA,QAAA,CAAA,CAAA,GAAA,CAAA,CAAA;;AACA,YAAA,UAAA,IAAA,IAAA,CAAA,CAAA,CAAA,KAAA,CAAA,QAAA,IAAA,UAAA,GAAA,QAAA,CAAA,CAAA,CAAA,CAAA,EAAA;AACA,eAAA,gBAAA,GAAA,CAAA;AACA;AACA;AACA;AApBA;AAtDA,CAAA","sourcesContent":["<template>\n  <div class=\"aplayer-lrc\">\n    <div\n      class=\"aplayer-lrc-contents\"\n      :style=\"transformStyle\"\n    >\n      <p\n        v-for=\"(line, index) of lrcLines\"\n        :key=\"index\"\n        :class=\"{ 'aplayer-lrc-current': index === currentLineIndex }\"\n      >\n        {{ line[1] }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {parseLrc} from '../utils'\n\n  export default {\n    props: {\n      currentMusic: {\n        type: Object,\n        required: true\n      },\n      playStat: {\n        type: Object,\n        required: true\n      }\n    },\n    data () {\n      return {\n        displayLrc: '',\n        currentLineIndex: 0,\n      }\n    },\n    computed: {\n      lrcLines () {\n        return parseLrc(this.displayLrc)\n      },\n      currentLine () {\n        if (this.currentLineIndex > this.lrcLines.length - 1) {\n          return null\n        }\n        return this.lrcLines[this.currentLineIndex]\n      },\n      transformStyle () {\n        // transform: translateY(0); -webkit-transform: translateY(0);\n        return {\n          transform: `translateY(${-this.currentLineIndex * 16}px)`,\n          webkitTransform: `translateY(${-this.currentLineIndex * 16}px)`,\n        }\n      },\n    },\n    methods: {\n      applyLrc (lrc) {\n        if (/^https?:\\/\\//.test(lrc)) {\n          this.fetchLrc(lrc)\n        } else {\n          this.displayLrc = lrc\n        }\n      },\n      fetchLrc (src) {\n        fetch(src)\n          .then(response => response.text())\n          .then((lrc) => {\n            this.displayLrc = lrc\n          })\n      },\n      hideLrc () {\n        this.displayLrc = ''\n      },\n    },\n    watch: {\n      currentMusic: {\n        immediate: true,\n        handler (music) {\n          this.currentLineIndex = 0\n          if (music.lrc) {\n            this.applyLrc(music.lrc)\n          } else {\n            this.hideLrc()\n          }\n        }\n      },\n      'playStat.playedTime' (playedTime) {\n        for (let i = 0; i < this.lrcLines.length; i++) {\n          const line = this.lrcLines[i]\n          const nextLine = this.lrcLines[i + 1]\n          if (playedTime >= line[0] && (!nextLine || playedTime < nextLine[0])) {\n            this.currentLineIndex = i\n          }\n        }\n      },\n    }\n  }\n</script>\n<style lang=\"scss\">\n  @import \"../scss/variables\";\n\n  .aplayer-lrc {\n    position: relative;\n    height: $lrc-height;\n    text-align: center;\n    overflow: hidden;\n    margin-bottom: 7px;\n\n    &:before {\n      position: absolute;\n      top: 0;\n      z-index: 1;\n      display: block;\n      overflow: hidden;\n      width: 100%;\n      height: 10%;\n      content: ' ';\n      background: -moz-linear-gradient(top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);\n      background: -webkit-linear-gradient(top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);\n      background: linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);\n      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#00ffffff', GradientType=0);\n    }\n\n    &:after {\n      position: absolute;\n      bottom: 0;\n      z-index: 1;\n      display: block;\n      overflow: hidden;\n      width: 100%;\n      height: 33%;\n      content: ' ';\n      background: -moz-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.8) 100%);\n      background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.8) 100%);\n      background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.8) 100%);\n      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00ffffff', endColorstr='#ccffffff', GradientType=0);\n    }\n\n    p {\n      font-size: 12px;\n      color: #666;\n      line-height: 16px;\n      height: 16px;\n      padding: 0;\n      margin: 0;\n      transition: all 0.5s ease-out;\n      opacity: 0.4;\n      overflow: hidden;\n\n      &.aplayer-lrc-current {\n        opacity: 1;\n        overflow: visible;\n        height: initial;\n      }\n    }\n\n    .aplayer-lrc-contents {\n      width: 100%;\n      transition: all 0.5s ease-out;\n      user-select: text;\n      cursor: default;\n    }\n  }\n</style>"],"sourceRoot":"node_modules/vue-aplayer/src/components"}]}