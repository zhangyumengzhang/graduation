{"remainingRequest":"D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2021graduate\\graduation\\node_modules\\vue-aplayer\\src\\components\\aplayer-lrc.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2021graduate\\graduation\\node_modules\\vue-aplayer\\src\\components\\aplayer-lrc.vue","mtime":1612070388741},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\babel-loader\\lib\\index.js","mtime":1594033213222},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js","mtime":1594033220124}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7cGFyc2VMcmN9IGZyb20gJy4uL3V0aWxzJwoKZXhwb3J0IGRlZmF1bHQgewogIHByb3BzOiB7CiAgICBjdXJyZW50TXVzaWM6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICByZXF1aXJlZDogdHJ1ZQogICAgfSwKICAgIHBsYXlTdGF0OiB7CiAgICAgIHR5cGU6IE9iamVjdCwKICAgICAgcmVxdWlyZWQ6IHRydWUKICAgIH0KICB9LAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgZGlzcGxheUxyYzogJycsCiAgICAgIGN1cnJlbnRMaW5lSW5kZXg6IDAsCiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgbHJjTGluZXMgKCkgewogICAgICByZXR1cm4gcGFyc2VMcmModGhpcy5kaXNwbGF5THJjKQogICAgfSwKICAgIGN1cnJlbnRMaW5lICgpIHsKICAgICAgaWYgKHRoaXMuY3VycmVudExpbmVJbmRleCA+IHRoaXMubHJjTGluZXMubGVuZ3RoIC0gMSkgewogICAgICAgIHJldHVybiBudWxsCiAgICAgIH0KICAgICAgcmV0dXJuIHRoaXMubHJjTGluZXNbdGhpcy5jdXJyZW50TGluZUluZGV4XQogICAgfSwKICAgIHRyYW5zZm9ybVN0eWxlICgpIHsKICAgICAgLy8gdHJhbnNmb3JtOiB0cmFuc2xhdGVZKDApOyAtd2Via2l0LXRyYW5zZm9ybTogdHJhbnNsYXRlWSgwKTsKICAgICAgcmV0dXJuIHsKICAgICAgICB0cmFuc2Zvcm06IGB0cmFuc2xhdGVZKCR7LXRoaXMuY3VycmVudExpbmVJbmRleCAqIDE2fXB4KWAsCiAgICAgICAgd2Via2l0VHJhbnNmb3JtOiBgdHJhbnNsYXRlWSgkey10aGlzLmN1cnJlbnRMaW5lSW5kZXggKiAxNn1weClgLAogICAgICB9CiAgICB9LAogIH0sCiAgbWV0aG9kczogewogICAgYXBwbHlMcmMgKGxyYykgewogICAgICBpZiAoL15odHRwcz86XC9cLy8udGVzdChscmMpKSB7CiAgICAgICAgdGhpcy5mZXRjaExyYyhscmMpCiAgICAgIH0gZWxzZSB7CiAgICAgICAgdGhpcy5kaXNwbGF5THJjID0gbHJjCiAgICAgIH0KICAgIH0sCiAgICBmZXRjaExyYyAoc3JjKSB7CiAgICAgIGZldGNoKHNyYykKICAgICAgICAudGhlbihyZXNwb25zZSA9PiByZXNwb25zZS50ZXh0KCkpCiAgICAgICAgLnRoZW4oKGxyYykgPT4gewogICAgICAgICAgdGhpcy5kaXNwbGF5THJjID0gbHJjCiAgICAgICAgfSkKICAgIH0sCiAgICBoaWRlTHJjICgpIHsKICAgICAgdGhpcy5kaXNwbGF5THJjID0gJycKICAgIH0sCiAgfSwKICB3YXRjaDogewogICAgY3VycmVudE11c2ljOiB7CiAgICAgIGltbWVkaWF0ZTogdHJ1ZSwKICAgICAgaGFuZGxlciAobXVzaWMpIHsKICAgICAgICB0aGlzLmN1cnJlbnRMaW5lSW5kZXggPSAwCiAgICAgICAgaWYgKG11c2ljLmxyYykgewogICAgICAgICAgdGhpcy5hcHBseUxyYyhtdXNpYy5scmMpCiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuaGlkZUxyYygpCiAgICAgICAgfQogICAgICB9CiAgICB9LAogICAgJ3BsYXlTdGF0LnBsYXllZFRpbWUnIChwbGF5ZWRUaW1lKSB7CiAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdGhpcy5scmNMaW5lcy5sZW5ndGg7IGkrKykgewogICAgICAgIGNvbnN0IGxpbmUgPSB0aGlzLmxyY0xpbmVzW2ldCiAgICAgICAgY29uc3QgbmV4dExpbmUgPSB0aGlzLmxyY0xpbmVzW2kgKyAxXQogICAgICAgIGlmIChwbGF5ZWRUaW1lID49IGxpbmVbMF0gJiYgKCFuZXh0TGluZSB8fCBwbGF5ZWRUaW1lIDwgbmV4dExpbmVbMF0pKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRMaW5lSW5kZXggPSBpCiAgICAgICAgfQogICAgICB9CiAgICB9LAogIH0KfQo="},{"version":3,"sources":["aplayer-lrc.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;AAkBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"aplayer-lrc.vue","sourceRoot":"node_modules/vue-aplayer/src/components","sourcesContent":["<template>\n  <div class=\"aplayer-lrc\">\n    <div\n      class=\"aplayer-lrc-contents\"\n      :style=\"transformStyle\"\n    >\n      <p\n        v-for=\"(line, index) of lrcLines\"\n        :key=\"index\"\n        :class=\"{ 'aplayer-lrc-current': index === currentLineIndex }\"\n      >\n        {{ line[1] }}\n      </p>\n    </div>\n  </div>\n</template>\n\n<script>\n  import {parseLrc} from '../utils'\n\n  export default {\n    props: {\n      currentMusic: {\n        type: Object,\n        required: true\n      },\n      playStat: {\n        type: Object,\n        required: true\n      }\n    },\n    data () {\n      return {\n        displayLrc: '',\n        currentLineIndex: 0,\n      }\n    },\n    computed: {\n      lrcLines () {\n        return parseLrc(this.displayLrc)\n      },\n      currentLine () {\n        if (this.currentLineIndex > this.lrcLines.length - 1) {\n          return null\n        }\n        return this.lrcLines[this.currentLineIndex]\n      },\n      transformStyle () {\n        // transform: translateY(0); -webkit-transform: translateY(0);\n        return {\n          transform: `translateY(${-this.currentLineIndex * 16}px)`,\n          webkitTransform: `translateY(${-this.currentLineIndex * 16}px)`,\n        }\n      },\n    },\n    methods: {\n      applyLrc (lrc) {\n        if (/^https?:\\/\\//.test(lrc)) {\n          this.fetchLrc(lrc)\n        } else {\n          this.displayLrc = lrc\n        }\n      },\n      fetchLrc (src) {\n        fetch(src)\n          .then(response => response.text())\n          .then((lrc) => {\n            this.displayLrc = lrc\n          })\n      },\n      hideLrc () {\n        this.displayLrc = ''\n      },\n    },\n    watch: {\n      currentMusic: {\n        immediate: true,\n        handler (music) {\n          this.currentLineIndex = 0\n          if (music.lrc) {\n            this.applyLrc(music.lrc)\n          } else {\n            this.hideLrc()\n          }\n        }\n      },\n      'playStat.playedTime' (playedTime) {\n        for (let i = 0; i < this.lrcLines.length; i++) {\n          const line = this.lrcLines[i]\n          const nextLine = this.lrcLines[i + 1]\n          if (playedTime >= line[0] && (!nextLine || playedTime < nextLine[0])) {\n            this.currentLineIndex = i\n          }\n        }\n      },\n    }\n  }\n</script>\n<style lang=\"scss\">\n  @import \"../scss/variables\";\n\n  .aplayer-lrc {\n    position: relative;\n    height: $lrc-height;\n    text-align: center;\n    overflow: hidden;\n    margin-bottom: 7px;\n\n    &:before {\n      position: absolute;\n      top: 0;\n      z-index: 1;\n      display: block;\n      overflow: hidden;\n      width: 100%;\n      height: 10%;\n      content: ' ';\n      background: -moz-linear-gradient(top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);\n      background: -webkit-linear-gradient(top, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);\n      background: linear-gradient(to bottom, rgba(255, 255, 255, 1) 0%, rgba(255, 255, 255, 0) 100%);\n      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#ffffff', endColorstr='#00ffffff', GradientType=0);\n    }\n\n    &:after {\n      position: absolute;\n      bottom: 0;\n      z-index: 1;\n      display: block;\n      overflow: hidden;\n      width: 100%;\n      height: 33%;\n      content: ' ';\n      background: -moz-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.8) 100%);\n      background: -webkit-linear-gradient(top, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.8) 100%);\n      background: linear-gradient(to bottom, rgba(255, 255, 255, 0) 0%, rgba(255, 255, 255, 0.8) 100%);\n      filter: progid:DXImageTransform.Microsoft.gradient(startColorstr='#00ffffff', endColorstr='#ccffffff', GradientType=0);\n    }\n\n    p {\n      font-size: 12px;\n      color: #666;\n      line-height: 16px;\n      height: 16px;\n      padding: 0;\n      margin: 0;\n      transition: all 0.5s ease-out;\n      opacity: 0.4;\n      overflow: hidden;\n\n      &.aplayer-lrc-current {\n        opacity: 1;\n        overflow: visible;\n        height: initial;\n      }\n    }\n\n    .aplayer-lrc-contents {\n      width: 100%;\n      transition: all 0.5s ease-out;\n      user-select: text;\n      cursor: default;\n    }\n  }\n</style>"]}]}