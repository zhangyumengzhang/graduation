{"remainingRequest":"D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2021graduate\\graduation\\node_modules\\mint-ui\\packages\\index-list\\src\\index-list.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2021graduate\\graduation\\node_modules\\mint-ui\\packages\\index-list\\src\\index-list.vue","mtime":1611497133402},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\babel-loader\\lib\\index.js","mtime":1594033213222},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js","mtime":1594033220124}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAnbXQtaW5kZXgtbGlzdCcsCgogIHByb3BzOiB7CiAgICBoZWlnaHQ6IE51bWJlciwKICAgIHNob3dJbmRpY2F0b3I6IHsKICAgICAgdHlwZTogQm9vbGVhbiwKICAgICAgZGVmYXVsdDogdHJ1ZQogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBzZWN0aW9uczogW10sCiAgICAgIG5hdldpZHRoOiAwLAogICAgICBpbmRpY2F0b3JUaW1lOiBudWxsLAogICAgICBtb3Zpbmc6IGZhbHNlLAogICAgICBmaXJzdFNlY3Rpb246IG51bGwsCiAgICAgIGN1cnJlbnRJbmRpY2F0b3I6ICcnLAogICAgICBjdXJyZW50SGVpZ2h0OiB0aGlzLmhlaWdodCwKICAgICAgbmF2T2Zmc2V0WDogMAogICAgfTsKICB9LAoKICB3YXRjaDogewogICAgc2VjdGlvbnMoKSB7CiAgICAgIHRoaXMuaW5pdCgpOwogICAgfSwKICAgIGhlaWdodCh2YWwpIHsKICAgICAgaWYgKHZhbCkgewogICAgICAgIHRoaXMuY3VycmVudEhlaWdodCA9IHZhbDsKICAgICAgfQogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIGluaXQoKSB7CiAgICAgIHRoaXMuJG5leHRUaWNrKCgpID0+IHsKICAgICAgICB0aGlzLm5hdldpZHRoID0gdGhpcy4kcmVmcy5uYXYuY2xpZW50V2lkdGg7CiAgICAgIH0pOwogICAgICBsZXQgbGlzdEl0ZW1zID0gdGhpcy4kcmVmcy5jb250ZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKCdsaScpOwogICAgICBpZiAobGlzdEl0ZW1zLmxlbmd0aCA+IDApIHsKICAgICAgICB0aGlzLmZpcnN0U2VjdGlvbiA9IGxpc3RJdGVtc1swXTsKICAgICAgfQogICAgfSwKCiAgICBoYW5kbGVUb3VjaFN0YXJ0KGUpIHsKICAgICAgaWYgKGUudGFyZ2V0LnRhZ05hbWUgIT09ICdMSScpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5uYXZPZmZzZXRYID0gZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRYOwogICAgICB0aGlzLnNjcm9sbExpc3QoZS5jaGFuZ2VkVG91Y2hlc1swXS5jbGllbnRZKTsKICAgICAgaWYgKHRoaXMuaW5kaWNhdG9yVGltZSkgewogICAgICAgIGNsZWFyVGltZW91dCh0aGlzLmluZGljYXRvclRpbWUpOwogICAgICB9CiAgICAgIHRoaXMubW92aW5nID0gdHJ1ZTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNobW92ZScsIHRoaXMuaGFuZGxlVG91Y2hNb3ZlKTsKICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoZW5kJywgdGhpcy5oYW5kbGVUb3VjaEVuZCk7CiAgICB9LAoKICAgIGhhbmRsZVRvdWNoTW92ZShlKSB7CiAgICAgIGUucHJldmVudERlZmF1bHQoKTsKICAgICAgdGhpcy5zY3JvbGxMaXN0KGUuY2hhbmdlZFRvdWNoZXNbMF0uY2xpZW50WSk7CiAgICB9LAoKICAgIGhhbmRsZVRvdWNoRW5kKCkgewogICAgICB0aGlzLmluZGljYXRvclRpbWUgPSBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLm1vdmluZyA9IGZhbHNlOwogICAgICAgIHRoaXMuY3VycmVudEluZGljYXRvciA9ICcnOwogICAgICB9LCA1MDApOwogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5oYW5kbGVUb3VjaE1vdmUpOwogICAgICB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigndG91Y2hlbmQnLCB0aGlzLmhhbmRsZVRvdWNoRW5kKTsKICAgIH0sCgogICAgc2Nyb2xsTGlzdCh5KSB7CiAgICAgIGxldCBjdXJyZW50SXRlbSA9IGRvY3VtZW50LmVsZW1lbnRGcm9tUG9pbnQodGhpcy5uYXZPZmZzZXRYLCB5KTsKICAgICAgaWYgKCFjdXJyZW50SXRlbSB8fCAhY3VycmVudEl0ZW0uY2xhc3NMaXN0LmNvbnRhaW5zKCdtaW50LWluZGV4bGlzdC1uYXZpdGVtJykpIHsKICAgICAgICByZXR1cm47CiAgICAgIH0KICAgICAgdGhpcy5jdXJyZW50SW5kaWNhdG9yID0gY3VycmVudEl0ZW0uaW5uZXJUZXh0OwogICAgICBsZXQgdGFyZ2V0cyA9IHRoaXMuc2VjdGlvbnMuZmlsdGVyKHNlY3Rpb24gPT4gc2VjdGlvbi5pbmRleCA9PT0gY3VycmVudEl0ZW0uaW5uZXJUZXh0KTsKICAgICAgbGV0IHRhcmdldERPTTsKICAgICAgaWYgKHRhcmdldHMubGVuZ3RoID4gMCkgewogICAgICAgIHRhcmdldERPTSA9IHRhcmdldHNbMF0uJGVsOwogICAgICAgIHRoaXMuJHJlZnMuY29udGVudC5zY3JvbGxUb3AgPSB0YXJnZXRET00uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wIC0gdGhpcy5maXJzdFNlY3Rpb24uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wOwogICAgICB9CiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGlmICghdGhpcy5jdXJyZW50SGVpZ2h0KSB7CiAgICAgIHdpbmRvdy5zY3JvbGxUbygwLCAwKTsKICAgICAgcmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpPT57CiAgICAgICAgdGhpcy5jdXJyZW50SGVpZ2h0ID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodCAtIHRoaXMuJHJlZnMuY29udGVudC5nZXRCb3VuZGluZ0NsaWVudFJlY3QoKS50b3A7CiAgICAgIH0pOwogICAgfQogICAgdGhpcy5pbml0KCk7CiAgfQp9Owo="},{"version":3,"sources":["index-list.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgFA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"index-list.vue","sourceRoot":"node_modules/mint-ui/packages/index-list/src","sourcesContent":["<template>\n  <div class=\"mint-indexlist\">\n    <ul class=\"mint-indexlist-content\" ref=\"content\" :style=\"{ 'height': currentHeight + 'px', 'margin-right': navWidth + 'px'}\">\n      <slot></slot>\n    </ul>\n    \n    <div class=\"mint-indexlist-nav\" @touchstart=\"handleTouchStart\" ref=\"nav\">\n      <ul class=\"mint-indexlist-navlist\">\n        <li class=\"mint-indexlist-navitem\" v-for=\"section in sections\">{{ section.index }}</li>\n      </ul>\n    </div>\n    \n    <div class=\"mint-indexlist-indicator\" v-if=\"showIndicator\" v-show=\"moving\">{{ currentIndicator }}</div>\n  </div>\n</template>\n\n<style lang=\"css\">\n  @import \"../../../src/style/var.css\";\n\n  @component-namespace mint {\n    @component indexlist {\n      width: 100%;\n      position: relative;\n      overflow: hidden;\n      \n      @descendent content {\n        margin: 0;\n        padding: 0;\n        overflow: auto;\n      }\n      \n      @descendent nav {\n        position: absolute;\n        top: 0;\n        bottom: 0;\n        right: 0;\n        margin: 0;\n        background-color: #fff;\n        border-left: solid 1px #ddd;\n        text-align: center;\n        max-height: 100%;\n        display: flex;\n        flex-direction: column;\n        justify-content: center;\n      }\n      \n      @descendent navlist {\n        padding: 0;\n        margin: 0;\n        list-style: none;\n        max-height: 100%;\n        display: flex;\n        flex-direction: column;\n      }\n      \n      @descendent navitem {\n        padding: 2px 6px;\n        font-size: 12px;\n        user-select: none;\n        -webkit-touch-callout: none;\n      }\n      \n      @descendent indicator {\n        position: absolute;\n        size: 50px;\n        top: 50%;\n        left: 50%;\n        transform: translate(-50%, -50%);\n        text-align: center;\n        line-height: 50px;\n        background-color: rgba(0, 0, 0, .7);\n        border-radius: 5px;\n        color: #fff;\n        font-size: 22px;\n      }\n    }\n  }\n</style>\n\n<script type=\"text/babel\">\n  export default {\n    name: 'mt-index-list',\n\n    props: {\n      height: Number,\n      showIndicator: {\n        type: Boolean,\n        default: true\n      }\n    },\n\n    data() {\n      return {\n        sections: [],\n        navWidth: 0,\n        indicatorTime: null,\n        moving: false,\n        firstSection: null,\n        currentIndicator: '',\n        currentHeight: this.height,\n        navOffsetX: 0\n      };\n    },\n\n    watch: {\n      sections() {\n        this.init();\n      },\n      height(val) {\n        if (val) {\n          this.currentHeight = val;\n        }\n      }\n    },\n\n    methods: {\n      init() {\n        this.$nextTick(() => {\n          this.navWidth = this.$refs.nav.clientWidth;\n        });\n        let listItems = this.$refs.content.getElementsByTagName('li');\n        if (listItems.length > 0) {\n          this.firstSection = listItems[0];\n        }\n      },\n\n      handleTouchStart(e) {\n        if (e.target.tagName !== 'LI') {\n          return;\n        }\n        this.navOffsetX = e.changedTouches[0].clientX;\n        this.scrollList(e.changedTouches[0].clientY);\n        if (this.indicatorTime) {\n          clearTimeout(this.indicatorTime);\n        }\n        this.moving = true;\n        window.addEventListener('touchmove', this.handleTouchMove);\n        window.addEventListener('touchend', this.handleTouchEnd);\n      },\n\n      handleTouchMove(e) {\n        e.preventDefault();\n        this.scrollList(e.changedTouches[0].clientY);\n      },\n\n      handleTouchEnd() {\n        this.indicatorTime = setTimeout(() => {\n          this.moving = false;\n          this.currentIndicator = '';\n        }, 500);\n        window.removeEventListener('touchmove', this.handleTouchMove);\n        window.removeEventListener('touchend', this.handleTouchEnd);\n      },\n\n      scrollList(y) {\n        let currentItem = document.elementFromPoint(this.navOffsetX, y);\n        if (!currentItem || !currentItem.classList.contains('mint-indexlist-navitem')) {\n          return;\n        }\n        this.currentIndicator = currentItem.innerText;\n        let targets = this.sections.filter(section => section.index === currentItem.innerText);\n        let targetDOM;\n        if (targets.length > 0) {\n          targetDOM = targets[0].$el;\n          this.$refs.content.scrollTop = targetDOM.getBoundingClientRect().top - this.firstSection.getBoundingClientRect().top;\n        }\n      }\n    },\n\n    mounted() {\n      if (!this.currentHeight) {\n        window.scrollTo(0, 0);\n        requestAnimationFrame(()=>{\n          this.currentHeight = document.documentElement.clientHeight - this.$refs.content.getBoundingClientRect().top;\n        });\n      }\n      this.init();\n    }\n  };\n</script>\n"]}]}