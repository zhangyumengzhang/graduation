{"remainingRequest":"D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2021graduate\\graduation\\node_modules\\mint-ui\\packages\\tab-container\\src\\tab-container.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2021graduate\\graduation\\node_modules\\mint-ui\\packages\\tab-container\\src\\tab-container.vue","mtime":1611497133402},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\babel-loader\\lib\\index.js","mtime":1594033213222},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js","mtime":1594033220124}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCB7IG9uY2UgfSBmcm9tICdtaW50LXVpL3NyYy91dGlscy9kb20nOwppbXBvcnQgYXJyYXlGaW5kSW5kZXggZnJvbSAnYXJyYXktZmluZC1pbmRleCc7CgovKioKICogbXQtdGFiLWNvbnRhaW5lcgogKiBAZGVzYyDpnaLmnb/vvIzmkK3phY0gdGFiLWNvbnRhaW5lci1pdGVtIOS9v+eUqAogKiBAbW9kdWxlIGNvbXBvbmVudHMvdGFiLWNvbnRhaW5lcgogKgogKiBAcGFyYW0ge251bWJlcnxzdHJpbmd9IFt2YWx1ZV0gLSDlvZPliY3mv4DmtLvnmoQgdGFiSWQKICoKICogQGV4YW1wbGUKICogPG10LXRhYi1jb250YWluZXIgdi1tb2RlbD0ic2VsZWN0ZWQiPgogKiAgIDxtdC10YWItY29udGFpbmVyLWl0ZW0gaWQ9IjEiPiDlhoXlrrlBIDwvbXQtdGFiLWNvbnRhaW5lci1pdGVtPgogKiAgIDxtdC10YWItY29udGFpbmVyLWl0ZW0gaWQ9IjIiPiDlhoXlrrlCIDwvbXQtdGFiLWNvbnRhaW5lci1pdGVtPgogKiAgIDxtdC10YWItY29udGFpbmVyLWl0ZW0gaWQ9IjMiPiDlhoXlrrlDIDwvbXQtdGFiLWNvbnRhaW5lci1pdGVtPgogKiA8L210LXRhYi1jb250YWluZXI+CiAqLwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ210LXRhYi1jb250YWluZXInLAoKICBwcm9wczogewogICAgdmFsdWU6IHt9LAogICAgc3dpcGVhYmxlOiBCb29sZWFuCiAgfSwKCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHN0YXJ0OiB7IHg6IDAsIHk6IDAgfSwKICAgICAgc3dpcGluZzogZmFsc2UsCiAgICAgIGFjdGl2ZUl0ZW1zOiBbXSwKICAgICAgcGFnZVdpZHRoOiAwLAogICAgICBjdXJyZW50QWN0aXZlOiB0aGlzLnZhbHVlCiAgICB9OwogIH0sCgogIHdhdGNoOiB7CiAgICB2YWx1ZSh2YWwpIHsKICAgICAgdGhpcy5jdXJyZW50QWN0aXZlID0gdmFsOwogICAgfSwKCiAgICBjdXJyZW50QWN0aXZlKHZhbCwgb2xkVmFsdWUpIHsKICAgICAgdGhpcy4kZW1pdCgnaW5wdXQnLCB2YWwpOwogICAgICBpZiAoIXRoaXMuc3dpcGVhYmxlKSByZXR1cm47CiAgICAgIGNvbnN0IGxhc3RJbmRleCA9IGFycmF5RmluZEluZGV4KHRoaXMuJGNoaWxkcmVuLAogICAgICAgIGl0ZW0gPT4gaXRlbS5pZCA9PT0gb2xkVmFsdWUpOwogICAgICB0aGlzLnN3aXBlTGVhdmVUcmFuc2l0aW9uKGxhc3RJbmRleCk7CiAgICB9CiAgfSwKCiAgbW91bnRlZCgpIHsKICAgIGlmICghdGhpcy5zd2lwZWFibGUpIHJldHVybjsKCiAgICB0aGlzLndyYXAgPSB0aGlzLiRyZWZzLndyYXA7CiAgICB0aGlzLnBhZ2VXaWR0aCA9IHRoaXMud3JhcC5jbGllbnRXaWR0aDsKICAgIHRoaXMubGltaXRXaWR0aCA9IHRoaXMucGFnZVdpZHRoIC8gNDsKICB9LAoKICBtZXRob2RzOiB7CiAgICBzd2lwZUxlYXZlVHJhbnNpdGlvbihsYXN0SW5kZXggPSAwKSB7CiAgICAgIGlmICh0eXBlb2YgdGhpcy5pbmRleCAhPT0gJ251bWJlcicpIHsKICAgICAgICB0aGlzLmluZGV4ID0gYXJyYXlGaW5kSW5kZXgodGhpcy4kY2hpbGRyZW4sCiAgICAgICAgICBpdGVtID0+IGl0ZW0uaWQgPT09IHRoaXMuY3VycmVudEFjdGl2ZSk7CiAgICAgICAgdGhpcy5zd2lwZU1vdmUoLWxhc3RJbmRleCAqIHRoaXMucGFnZVdpZHRoKTsKICAgICAgfQoKICAgICAgc2V0VGltZW91dCgoKSA9PiB7CiAgICAgICAgdGhpcy53cmFwLmNsYXNzTGlzdC5hZGQoJ3N3aXBlLXRyYW5zaXRpb24nKTsKICAgICAgICB0aGlzLnN3aXBlTW92ZSgtdGhpcy5pbmRleCAqIHRoaXMucGFnZVdpZHRoKTsKCiAgICAgICAgb25jZSh0aGlzLndyYXAsICd3ZWJraXRUcmFuc2l0aW9uRW5kJywgXyA9PiB7CiAgICAgICAgICB0aGlzLndyYXAuY2xhc3NMaXN0LnJlbW92ZSgnc3dpcGUtdHJhbnNpdGlvbicpOwogICAgICAgICAgdGhpcy53cmFwLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9ICcnOwogICAgICAgICAgdGhpcy5zd2lwaW5nID0gZmFsc2U7CiAgICAgICAgICB0aGlzLmluZGV4ID0gbnVsbDsKICAgICAgICB9KTsKICAgICAgfSwgMCk7CiAgICB9LAoKICAgIHN3aXBlTW92ZShvZmZzZXQpIHsKICAgICAgdGhpcy53cmFwLnN0eWxlLndlYmtpdFRyYW5zZm9ybSA9IGB0cmFuc2xhdGUzZCgke29mZnNldH1weCwgMCwgMClgOwogICAgICB0aGlzLnN3aXBpbmcgPSB0cnVlOwogICAgfSwKCiAgICBzdGFydERyYWcoZXZ0KSB7CiAgICAgIGlmICghdGhpcy5zd2lwZWFibGUpIHJldHVybjsKICAgICAgZXZ0ID0gZXZ0LmNoYW5nZWRUb3VjaGVzID8gZXZ0LmNoYW5nZWRUb3VjaGVzWzBdIDogZXZ0OwogICAgICB0aGlzLmRyYWdnaW5nID0gdHJ1ZTsKICAgICAgdGhpcy5zdGFydC54ID0gZXZ0LnBhZ2VYOwogICAgICB0aGlzLnN0YXJ0LnkgPSBldnQucGFnZVk7CiAgICB9LAoKICAgIG9uRHJhZyhldnQpIHsKICAgICAgaWYgKCF0aGlzLmRyYWdnaW5nKSByZXR1cm47CiAgICAgIGxldCBzd2lwaW5nOwogICAgICBjb25zdCBlID0gZXZ0LmNoYW5nZWRUb3VjaGVzID8gZXZ0LmNoYW5nZWRUb3VjaGVzWzBdIDogZXZ0OwogICAgICBjb25zdCBvZmZzZXRUb3AgPSBlLnBhZ2VZIC0gdGhpcy5zdGFydC55OwogICAgICBjb25zdCBvZmZzZXRMZWZ0ID0gZS5wYWdlWCAtIHRoaXMuc3RhcnQueDsKICAgICAgY29uc3QgeSA9IE1hdGguYWJzKG9mZnNldFRvcCk7CiAgICAgIGNvbnN0IHggPSBNYXRoLmFicyhvZmZzZXRMZWZ0KTsKCiAgICAgIHN3aXBpbmcgPSAhKHggPCA1IHx8ICh4ID49IDUgJiYgeSA+PSB4ICogMS43MykpOwogICAgICBpZiAoIXN3aXBpbmcpIHJldHVybjsKICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7CgogICAgICBjb25zdCBsZW4gPSB0aGlzLiRjaGlsZHJlbi5sZW5ndGggLSAxOwogICAgICBjb25zdCBpbmRleCA9IGFycmF5RmluZEluZGV4KHRoaXMuJGNoaWxkcmVuLAogICAgICAgIGl0ZW0gPT4gaXRlbS5pZCA9PT0gdGhpcy5jdXJyZW50QWN0aXZlKTsKICAgICAgY29uc3QgY3VycmVudFBhZ2VPZmZzZXQgPSBpbmRleCAqIHRoaXMucGFnZVdpZHRoOwogICAgICBjb25zdCBvZmZzZXQgPSBvZmZzZXRMZWZ0IC0gY3VycmVudFBhZ2VPZmZzZXQ7CiAgICAgIGNvbnN0IGFic09mZnNldCA9IE1hdGguYWJzKG9mZnNldCk7CgogICAgICBpZiAoYWJzT2Zmc2V0ID4gbGVuICogdGhpcy5wYWdlV2lkdGggfHwKICAgICAgICAgIChvZmZzZXQgPiAwICYmIG9mZnNldCA8IHRoaXMucGFnZVdpZHRoKSkgewogICAgICAgIHRoaXMuc3dpcGluZyA9IGZhbHNlOwogICAgICAgIHJldHVybjsKICAgICAgfQoKICAgICAgdGhpcy5vZmZzZXRMZWZ0ID0gb2Zmc2V0TGVmdDsKICAgICAgdGhpcy5pbmRleCA9IGluZGV4OwogICAgICB0aGlzLnN3aXBlTW92ZShvZmZzZXQpOwogICAgfSwKCiAgICBlbmREcmFnKCkgewogICAgICBpZiAoIXRoaXMuc3dpcGluZykgcmV0dXJuOwogICAgICB0aGlzLmRyYWdnaW5nID0gZmFsc2U7CiAgICAgIGNvbnN0IGRpcmVjdGlvbiA9IHRoaXMub2Zmc2V0TGVmdCA+IDAgPyAtMSA6IDE7CiAgICAgIGNvbnN0IGlzQ2hhbmdlID0gTWF0aC5hYnModGhpcy5vZmZzZXRMZWZ0KSA+IHRoaXMubGltaXRXaWR0aDsKCiAgICAgIGlmIChpc0NoYW5nZSkgewogICAgICAgIHRoaXMuaW5kZXggKz0gZGlyZWN0aW9uOwogICAgICAgIGNvbnN0IGNoaWxkID0gdGhpcy4kY2hpbGRyZW5bdGhpcy5pbmRleF07CiAgICAgICAgaWYgKGNoaWxkKSB7CiAgICAgICAgICB0aGlzLmN1cnJlbnRBY3RpdmUgPSBjaGlsZC5pZDsKICAgICAgICAgIHJldHVybjsKICAgICAgICB9CiAgICAgIH0KCiAgICAgIHRoaXMuc3dpcGVMZWF2ZVRyYW5zaXRpb24oKTsKICAgIH0KICB9Cn07Cg=="},{"version":3,"sources":["tab-container.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmCA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"tab-container.vue","sourceRoot":"node_modules/mint-ui/packages/tab-container/src","sourcesContent":["<template>\n  <div\n    @touchstart=\"startDrag\"\n    @mousedown=\"startDrag\"\n    @touchmove=\"onDrag\"\n    @mousemove=\"onDrag\"\n    @mouseup=\"endDrag\"\n    @touchend=\"endDrag\"\n    class=\"mint-tab-container\">\n    <div\n      ref=\"wrap\"\n      class=\"mint-tab-container-wrap\">\n      <slot></slot>\n    </div>\n  </div>\n</template>\n\n<style lang=\"css\">\n  @component-namespace mint {\n    @component tab-container {\n      overflow: hidden;\n      position: relative;\n\n      @descendent wrap {\n        display: flex;\n      }\n\n      .swipe-transition {\n        transition: transform 150ms ease-in-out;\n      }\n    }\n  }\n</style>\n\n<script>\nimport { once } from 'mint-ui/src/utils/dom';\nimport arrayFindIndex from 'array-find-index';\n\n/**\n * mt-tab-container\n * @desc 面板，搭配 tab-container-item 使用\n * @module components/tab-container\n *\n * @param {number|string} [value] - 当前激活的 tabId\n *\n * @example\n * <mt-tab-container v-model=\"selected\">\n *   <mt-tab-container-item id=\"1\"> 内容A </mt-tab-container-item>\n *   <mt-tab-container-item id=\"2\"> 内容B </mt-tab-container-item>\n *   <mt-tab-container-item id=\"3\"> 内容C </mt-tab-container-item>\n * </mt-tab-container>\n */\nexport default {\n  name: 'mt-tab-container',\n\n  props: {\n    value: {},\n    swipeable: Boolean\n  },\n\n  data() {\n    return {\n      start: { x: 0, y: 0 },\n      swiping: false,\n      activeItems: [],\n      pageWidth: 0,\n      currentActive: this.value\n    };\n  },\n\n  watch: {\n    value(val) {\n      this.currentActive = val;\n    },\n\n    currentActive(val, oldValue) {\n      this.$emit('input', val);\n      if (!this.swipeable) return;\n      const lastIndex = arrayFindIndex(this.$children,\n        item => item.id === oldValue);\n      this.swipeLeaveTransition(lastIndex);\n    }\n  },\n\n  mounted() {\n    if (!this.swipeable) return;\n\n    this.wrap = this.$refs.wrap;\n    this.pageWidth = this.wrap.clientWidth;\n    this.limitWidth = this.pageWidth / 4;\n  },\n\n  methods: {\n    swipeLeaveTransition(lastIndex = 0) {\n      if (typeof this.index !== 'number') {\n        this.index = arrayFindIndex(this.$children,\n          item => item.id === this.currentActive);\n        this.swipeMove(-lastIndex * this.pageWidth);\n      }\n\n      setTimeout(() => {\n        this.wrap.classList.add('swipe-transition');\n        this.swipeMove(-this.index * this.pageWidth);\n\n        once(this.wrap, 'webkitTransitionEnd', _ => {\n          this.wrap.classList.remove('swipe-transition');\n          this.wrap.style.webkitTransform = '';\n          this.swiping = false;\n          this.index = null;\n        });\n      }, 0);\n    },\n\n    swipeMove(offset) {\n      this.wrap.style.webkitTransform = `translate3d(${offset}px, 0, 0)`;\n      this.swiping = true;\n    },\n\n    startDrag(evt) {\n      if (!this.swipeable) return;\n      evt = evt.changedTouches ? evt.changedTouches[0] : evt;\n      this.dragging = true;\n      this.start.x = evt.pageX;\n      this.start.y = evt.pageY;\n    },\n\n    onDrag(evt) {\n      if (!this.dragging) return;\n      let swiping;\n      const e = evt.changedTouches ? evt.changedTouches[0] : evt;\n      const offsetTop = e.pageY - this.start.y;\n      const offsetLeft = e.pageX - this.start.x;\n      const y = Math.abs(offsetTop);\n      const x = Math.abs(offsetLeft);\n\n      swiping = !(x < 5 || (x >= 5 && y >= x * 1.73));\n      if (!swiping) return;\n      evt.preventDefault();\n\n      const len = this.$children.length - 1;\n      const index = arrayFindIndex(this.$children,\n        item => item.id === this.currentActive);\n      const currentPageOffset = index * this.pageWidth;\n      const offset = offsetLeft - currentPageOffset;\n      const absOffset = Math.abs(offset);\n\n      if (absOffset > len * this.pageWidth ||\n          (offset > 0 && offset < this.pageWidth)) {\n        this.swiping = false;\n        return;\n      }\n\n      this.offsetLeft = offsetLeft;\n      this.index = index;\n      this.swipeMove(offset);\n    },\n\n    endDrag() {\n      if (!this.swiping) return;\n      this.dragging = false;\n      const direction = this.offsetLeft > 0 ? -1 : 1;\n      const isChange = Math.abs(this.offsetLeft) > this.limitWidth;\n\n      if (isChange) {\n        this.index += direction;\n        const child = this.$children[this.index];\n        if (child) {\n          this.currentActive = child.id;\n          return;\n        }\n      }\n\n      this.swipeLeaveTransition();\n    }\n  }\n};\n</script>\n"]}]}