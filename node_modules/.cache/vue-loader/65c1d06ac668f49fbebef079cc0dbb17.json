{"remainingRequest":"D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\2021graduate\\graduation\\src\\views\\newrnn.vue?vue&type=script&lang=js&","dependencies":[{"path":"D:\\2021graduate\\graduation\\src\\views\\newrnn.vue","mtime":1617540552933},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\babel-loader\\lib\\index.js","mtime":1594033213222},{"path":"D:\\2021graduate\\graduation\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1594033213228},{"path":"D:\\2021graduate\\graduation\\node_modules\\vue-loader\\lib\\index.js","mtime":1594033220124}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhICgpIHsKICAgIHJldHVybiB7CiAgICAgIGF1ZGlvVXJsOiAnJywKICAgICAgbmV3YXVkaW9Vcmw6ICcnLAogICAgICBmaWxlTGlzdDogW10sCiAgICAgIGZpbGVuYW1lOiAnJwogICAgfQogIH0sCgogIG1ldGhvZHM6IHsKICAgIC8vIOS4iuS8oOmfs+mikQogICAgYXN5bmMgYmVmb3JlVXBsb2FkIChmaWxlKSB7CiAgICAgIC8vIOaWh+S7tuexu+Wei+i/m+ihjOWIpOaWrQogICAgICBjb25zdCBpc0F1ZGlvID0gZmlsZS50eXBlID09PSAnYXVkaW8vbXAzJyB8fCBmaWxlLnR5cGUgPT09ICdhdWRpby93YXYnfHwgZmlsZS50eXBlID09PSAnYXVkaW8vbXBlZycKICAgICAgLy8g6ZmQ5Yi25LiK5Lyg5paH5Lu25aSn5bCPIDRNCiAgICAgIGNvbnN0IGlzTHQ0TSA9IGZpbGUuc2l6ZSAvIDEwMjQgLyAxMDI0IDwgNAogICAgICBpZiAoIWlzQXVkaW8pIHsKICAgICAgICB0aGlzLmZpbGVMaXN0ID0gW10KICAgICAgfSBlbHNlIHsKICAgICAgICBpZiAoIWlzTHQ0TSkgewogICAgICAgICAgdGhpcy5maWxlTGlzdCA9IFtdCiAgICAgICAgfQogICAgICB9CiAgICAgIGlmIChpc0F1ZGlvKSB7CiAgICAgICAgaWYgKGlzTHQ0TSkgewogICAgICAgICAgY29uc3QgYXVkaW9maWxlID0gbmV3IEZvcm1EYXRhKCkKICAgICAgICAgIHRoaXMuZmlsZW5hbWUgPSBmaWxlLm5hbWUKICAgICAgICAgIGF1ZGlvZmlsZS5hcHBlbmQoJ2F1ZGlvJywgZmlsZSkKICAgICAgICAgIGF1ZGlvZmlsZS5hcHBlbmQoJ2ZpbGVuYW1lJywgZmlsZS5uYW1lKQogICAgICAgICAgYXVkaW9maWxlLmFwcGVuZCgndXNlcm5hbWUnLCB3aW5kb3cuc2Vzc2lvblN0b3JhZ2UuZ2V0SXRlbSgndXNlcm5hbWUnKSkKICAgICAgICAgIGNvbnN0IHsgZGF0YTogcmVzIH0gPSBhd2FpdCB0aGlzLmF4aW9zLnBvc3QoJy9VcGF1ZGlvJywgYXVkaW9maWxlKQogICAgICAgICAgY29uc29sZS5sb2cocmVzKQogICAgICAgICAgaWYgKHJlcy5zdGF0dXMgIT09ICcxJykgewogICAgICAgICAgICBjb25zb2xlLmxvZygnY2VzaGknKQogICAgICAgICAgICByZXR1cm4gdGhpcy4kbWVzc2FnZS5lcnJvcihyZXMubWVzc2FnZSkKICAgICAgICAgIH0KICAgICAgICAgIGlmIChyZXMuc3RhdHVzID09ICcxJykgewogICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKQogICAgICAgICAgICAgdGhpcy5hdWRpb1VybCA9IHJlcy51cmwKICAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXVkaW9VcmwpCiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+S4iuS8oOaWh+S7tuWkp+Wwj+S4jeiDvei2hei/hyA0TUIhJykKICAgICAgICB9CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8gdGhpcy4kbWVzc2FnZS5lcnJvcihmaWxlLnR5cGUpCiAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcign5LiK5Lyg5paH5Lu25Y+q6IO95pivTXAz5oiW6ICFV2F25qC85byPJykKICAgICAgfQogICAgfSwKCiAgICBoYW5kbGVBdmF0YXJTdWNjZXNzIChyZXMsIGZpbGUpIHsKICAgICAgdGhpcy5hdWRpb1VybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoZmlsZS5yYXcpCiAgICAgIGNvbnNvbGUubG9nKHRoaXMuYXVkaW9VcmwpCiAgICB9LAoKICAgIGdldFRpbWVzIChmaWxlKSB7CiAgICAgIHZhciBjb250ZW50ID0gZmlsZQogICAgICAvLyDojrflj5blvZXpn7Pml7bplb8KICAgICAgdmFyIHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoY29udGVudCkKICAgICAgLy8g57uP5rWL6K+V77yM5Y+R546wYXVkaW/kuZ/lj6/ojrflj5bop4bpopHnmoTml7bplb8KICAgICAgdmFyIGF1ZGlvRWxlbWVudCA9IG5ldyBBdWRpbyh1cmwpCiAgICAgIGF1ZGlvRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdsb2FkZWRtZXRhZGF0YScsIChfZXZlbnQpID0+IHsKICAgICAgICB0aGlzLmF1ZGlvRHVyYXRpb24gPSBwYXJzZUludChhdWRpb0VsZW1lbnQuZHVyYXRpb24pCiAgICAgICAgY29uc29sZS5sb2codGhpcy5hdWRpb0R1cmF0aW9uKQogICAgICB9KQogICAgfSwKCiAgICAvLyDpmY3lmarlpITnkIYKICAgIGFzeW5jIHJubiAoKSB7CiAgICAgIGNvbnN0IGF1ZGlvID0gbmV3IEZvcm1EYXRhKCkKICAgICAgYXVkaW8uYXBwZW5kKCdwYXRoJywgdGhpcy5hdWRpb1VybCkKICAgICAgYXVkaW8uYXBwZW5kKCd1c2VybmFtZScsIHdpbmRvdy5zZXNzaW9uU3RvcmFnZS5nZXRJdGVtKCd1c2VybmFtZScpKQogICAgICBjb25zdCB7IGRhdGE6IHJlcyB9ID0gYXdhaXQgdGhpcy5heGlvcy5wb3N0KCcvcm5uJywgYXVkaW8pCiAgICAgIGlmIChyZXMuc3RhdHVzICE9PSAnMScpIHJldHVybiB0aGlzLiRtZXNzYWdlLmVycm9yKHJlcy5tZXNzYWdlKQogICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1lc3NhZ2UpCiAgICAgIHRoaXMubmV3YXVkaW9VcmwgPSByZXMudXJsCiAgICAgIGNvbnNvbGUubG9nKHRoaXMubmV3YXVkaW9VcmwpCiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["newrnn.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"newrnn.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"box\">\n      <!-- 面包屑导航区域\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/welcome' }\" @click=\"savenav\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>音频降噪</el-breadcrumb-item>\n    </el-breadcrumb> -->\n    <!-- 卡片视图区域 -->\n <el-card class=\"box-card\">\n    <div class=\"upload\">\n      <el-upload\n        class=\"upload-demo\"\n        drag\n        action=\"null\"\n        multiple\n        :show-file-list=\"false\"\n        :on-success=\"handleAvatarSuccess\"\n        :before-upload=\"beforeUpload\">\n        <i class=\"el-icon-upload\"></i>\n        <div class=\"el-upload__text\">将文件拖到此处，或<em>点击上传</em></div>\n        <div class=\"el-upload__tip\" slot=\"tip\">只能上传mp3/wav文件</div>\n      </el-upload>\n      <div class=\"audio\">\n        {{this.filename}}\n      </div>\n      <audio class=\"audio\" :src=\"audioUrl\"  controls muted=\"muted\"></audio>\n      <div class=\"button\">\n      <el-button type=\"primary\" round @click=\"rnn()\"> 降噪处理 </el-button>\n    </div>\n    <div class=\"audio\">\n       <audio class=\"audio\" :src=\"newaudioUrl\"  controls muted=\"muted\"></audio>\n    </div>\n    </div>\n </el-card>\n     <div class=\"bottom\">\n      <h4>北京市海淀区 ｜ 北京交通大学 ｜ 软件工程1704 ｜ 张雨梦</h4>\n    </div>\n  </div>\n</template>\n\n<script type=\"text/javascript\">\nvar audios = document.getElementsByTagName('audio')\n// 暂停函数\nfunction pauseAll () {\n  var self = this;\n  [].forEach.call(audios, function (i) {\n    // 将audios中其他的audio全部暂停\n    i !== self && i.pause()\n  })\n}\n// 给play事件绑定暂停函数\n[].forEach.call(audios, function (i) {\n  i.addEventListener('play', pauseAll.bind(i))\n})\n</script>\n<script>\nexport default {\n  data () {\n    return {\n      audioUrl: '',\n      newaudioUrl: '',\n      fileList: [],\n      filename: ''\n    }\n  },\n\n  methods: {\n    // 上传音频\n    async beforeUpload (file) {\n      // 文件类型进行判断\n      const isAudio = file.type === 'audio/mp3' || file.type === 'audio/wav'|| file.type === 'audio/mpeg'\n      // 限制上传文件大小 4M\n      const isLt4M = file.size / 1024 / 1024 < 4\n      if (!isAudio) {\n        this.fileList = []\n      } else {\n        if (!isLt4M) {\n          this.fileList = []\n        }\n      }\n      if (isAudio) {\n        if (isLt4M) {\n          const audiofile = new FormData()\n          this.filename = file.name\n          audiofile.append('audio', file)\n          audiofile.append('filename', file.name)\n          audiofile.append('username', window.sessionStorage.getItem('username'))\n          const { data: res } = await this.axios.post('/Upaudio', audiofile)\n          console.log(res)\n          if (res.status !== '1') {\n            console.log('ceshi')\n            return this.$message.error(res.message)\n          }\n          if (res.status == '1') {\n             this.$message.success(res.message)\n             this.audioUrl = res.url\n             console.log(this.audioUrl)\n          }\n        } else {\n          this.$message.error('上传文件大小不能超过 4MB!')\n        }\n      } else {\n        // this.$message.error(file.type)\n        this.$message.error('上传文件只能是Mp3或者Wav格式')\n      }\n    },\n\n    handleAvatarSuccess (res, file) {\n      this.audioUrl = URL.createObjectURL(file.raw)\n      console.log(this.audioUrl)\n    },\n\n    getTimes (file) {\n      var content = file\n      // 获取录音时长\n      var url = URL.createObjectURL(content)\n      // 经测试，发现audio也可获取视频的时长\n      var audioElement = new Audio(url)\n      audioElement.addEventListener('loadedmetadata', (_event) => {\n        this.audioDuration = parseInt(audioElement.duration)\n        console.log(this.audioDuration)\n      })\n    },\n\n    // 降噪处理\n    async rnn () {\n      const audio = new FormData()\n      audio.append('path', this.audioUrl)\n      audio.append('username', window.sessionStorage.getItem('username'))\n      const { data: res } = await this.axios.post('/rnn', audio)\n      if (res.status !== '1') return this.$message.error(res.message)\n      this.$message.success(res.message)\n      this.newaudioUrl = res.url\n      console.log(this.newaudioUrl)\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.el-header, .el-footer {\n  background-color: #B3C0D1;\n  color: #333;\n  text-align: center;\n  line-height: 60px;\n}\n\n.el-aside {\n  background-color: #D3DCE6;\n  color: #333;\n  text-align: center;\n  line-height: 200px;\n}\n\n.upload {\n  background-color: #E9EEF3;\n  text-align: center;\n  padding-top: 50px;\n  padding-bottom: 50px;\n}\n.button {\n  background-color: #E9EEF3;\n  text-align: center;\n  margin-top: -5px;\n}\n.bottom {\n  background-color: #E9EEF3;\n  text-align: right;\n  padding-top: 50px;\n  padding-right: 50px;\n  padding-bottom: 10px;\n}\n.audio {\n  background-color: #E9EEF3;\n  margin-top: 20px;\n  margin-bottom: 15px;\n  text-align:center\n}\n</style>\n"]}]}